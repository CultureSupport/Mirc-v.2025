<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>mIRC v2.7 #IRCnet #QuakeNet #EFnet #DALnet </title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @font-face {
            font-family: 'Fixedsys';
            src: url('https://fonts.cdnfonts.com/s/14876/Fixedsys500c.woff') format('woff');
        }

        :root {
            --mirc-bg: #c0c0c0;
            --mirc-border-light: #ffffff;
            --mirc-border-dark: #808080;
            --mirc-text: #000000;
            --mirc-window: #ffffff;
            --mirc-blue: #000080;
        }

        body {
            background-color: #3a6ea5;
            font-family: 'Fixedsys', 'Courier New', monospace;
            height: 100vh;
            margin: 0;
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }

        .mirc-window {
            background: var(--mirc-bg);
            border: 2px solid;
            border-color: var(--mirc-border-light) var(--mirc-border-dark) var(--mirc-border-dark) var(--mirc-border-light);
            padding: 2px;
            display: flex;
            flex-direction: column;
        }

        .mirc-title-bar {
            background: linear-gradient(90deg, var(--mirc-blue), #1084d0);
            color: white;
            padding: 3px 6px;
            font-weight: bold;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 14px;
        }

        .mirc-content {
            background: var(--mirc-window);
            border: 2px inset var(--mirc-bg);
            flex-grow: 1;
            overflow-y: scroll;
            padding: 5px;
            font-size: 14px;
            line-height: 1.2;
        }

        .user-list {
            width: 190px;
            background: var(--mirc-window);
            border: 2px inset var(--mirc-bg);
            overflow-y: scroll;
            font-size: 13px;
        }

        .input-area {
            background: var(--mirc-window);
            border: 2px inset var(--mirc-bg);
            padding: 2px 5px;
            outline: none;
            width: 100%;
        }

        .btn-retro {
            background: var(--mirc-bg);
            border: 2px solid;
            border-color: var(--mirc-border-light) var(--mirc-border-dark) var(--mirc-border-dark) var(--mirc-border-light);
            padding: 2px 10px;
            cursor: pointer;
            font-size: 12px;
            color: black;
            white-space: nowrap;
        }

        .btn-retro:active, .btn-active {
            border-color: var(--mirc-border-dark) var(--mirc-border-light) var(--mirc-border-light) var(--mirc-border-dark);
            background: #d0d0d0;
            padding: 3px 9px 1px 11px;
        }

        .timestamp { color: #808080; }
        .nick { font-weight: bold; color: #0000ff; }
        .system { color: #008000; }
        .ops { color: #ff0000; font-weight: bold; }
        .dl-text { color: #800080; font-weight: bold; }

        .dl-panel {
            background: #d0d0d0;
            border-top: 2px solid #808080;
            max-height: 150px;
            overflow-y: auto;
            display: none;
        }

        .dl-row {
            display: grid; grid-template-columns: 180px 1fr 60px 80px;
            gap: 10px; padding: 4px; font-size: 11px;
            border-bottom: 1px solid #a0a0a0; align-items: center;
        }

        .progress-container { height: 10px; background: #fff; border: 1px solid #808080; }
        .progress-fill { height: 100%; background: #000080; width: 0%; transition: width 0.1s; }

        .notepad-window {
            position: absolute; top: 10%; left: 10%; width: 80%; height: 70%;
            z-index: 100; box-shadow: 10px 10px 20px rgba(0,0,0,0.3);
        }
        
        .network-tag { font-size: 10px; background: #000080; color: white; padding: 0 4px; border-radius: 2px; margin-right: 4px; }
    </style>
</head>
<body>

    <div class="flex flex-col h-full p-1 gap-1">
        <div class="mirc-window p-1 flex flex-row gap-2 items-center text-sm">
            <button class="btn-retro font-bold" id="btn-connect" onclick="startSimulation()">Connect</button>
            <button class="btn-retro" onclick="toggleDownloads()">DCC Status</button>
            <button class="btn-retro" onclick="openCatalog()">View Warez Catalog</button>
            <div class="ml-auto flex items-center gap-2">
                <select id="network-select" class="text-xs bg-white border border-gray-400 px-1" onchange="changeNetwork()">
                    <option value="IRCnet">IRCnet (Europe)</option>
                    <option value="QuakeNet">QuakeNet (Gaming)</option>
                    <option value="EFnet">EFnet (Old School)</option>
                    <option value="DALnet">DALnet (Services)</option>
                </select>
                <span id="burst-indicator" class="text-xs bg-red-100 text-red-800 px-1 hidden font-bold">DCC PACKET BURST</span>
                <span id="clock" class="text-xs">00:00:00</span>
            </div>
        </div>

        <div class="flex flex-row flex-grow gap-1 overflow-hidden relative">
            <div class="mirc-window flex-grow">
                <div class="mirc-title-bar">
                    <span id="channel-title">Status: Not Connected</span>
                </div>
                <div id="chat-output" class="mirc-content">
                    <div class="system">*** Select a network and click 'Connect' to join the 1997 Scene.</div>
                </div>
                <input type="text" id="chat-input" class="input-area" placeholder="/msg PacketServ get #Filename">
            </div>

            <div class="mirc-window">
                <div class="mirc-title-bar"><span id="user-count">Users</span></div>
                <div id="user-list" class="user-list h-full"></div>
            </div>

            <div id="notepad" class="mirc-window notepad-window hidden">
                <div class="mirc-title-bar">
                    <span>Notepad - 1997_Scene_Release_List.txt</span>
                    <button onclick="document.getElementById('notepad').classList.add('hidden')" class="bg-red-500 px-2 border border-white">X</button>
                </div>
                <textarea id="notepad-content" class="mirc-content w-full h-full font-mono text-xs p-4 outline-none resize-none" readonly></textarea>
            </div>
        </div>

        <div id="dl-panel" class="dl-panel mirc-window">
            <div class="bg-blue-900 text-white px-2 py-1 text-xs font-bold">DCC Get Transfers (200 KB/s Scene Limit)</div>
            <div id="dl-list"></div>
        </div>

        <div class="mirc-window p-px flex flex-row overflow-x-auto" id="switchbar"></div>

        <div class="mirc-window p-1 flex justify-between text-xs">
            <div>Status: <span id="status-text">Disconnected</span> | Net: <span id="net-id-display">N/A</span></div>
            <div>Active Packs: <span id="slot-count">0/10</span></div>
        </div>
    </div>

    <script>
        const networks = {
            "IRCnet": ["#irchelp", "#linux", "#warez", "#finland", "#sweden", "#germany"],
            "QuakeNet": ["#quake", "#clantest", "#quakenet", "#warsow", "#q3dm17"],
            "EFnet": ["#mirc", "#hacker", "#chat", "#underground", "#unix"],
            "DALnet": ["#friendly", "#teen", "#30plus", "#help", "#movies"]
        };

        const movies = [
            "Gladiator", "Memento", "Snatch", "The Matrix", "Kill Bill", "Sin City", "300", 
            "The Dark Knight", "Inception", "Avatar", "No Country for Old Men", "Superbad"
        ];
        
        const sceneGroups = ["RELOADED", "SKIDROW", "RAZOR1911", "HOODLUM", "PROPHET", "DiAMOND", "aXXo", "DMT"];
        
        let currentNetwork = "IRCnet";
        let activeChannel = "#irchelp";
        let channelData = {}; 
        let activeDownloads = [];
        let simulationRunning = false;

        function initData() {
            Object.keys(networks).forEach(net => {
                networks[net].forEach(chan => {
                    const key = `${net}:${chan}`;
                    const userCount = Math.floor(Math.random() * (2902 - 492 + 1)) + 492;
                    channelData[key] = {
                        messages: [`<div class="system">*** Now talking in ${chan} on ${net}</div>`],
                        users: Array.from({length: userCount}, (_, i) => ({
                            nick: sceneGroups[i % sceneGroups.length] + "_" + (i + 100),
                            rank: i < 20 ? "@" : (i < 60 ? "+" : "")
                        }))
                    };
                });
            });
        }

        function changeNetwork() {
            currentNetwork = document.getElementById('network-select').value;
            document.getElementById('net-id-display').innerText = currentNetwork;
            const firstChan = networks[currentNetwork][0];
            if (simulationRunning) switchChannel(firstChan);
        }

        function switchChannel(chan) {
            activeChannel = chan;
            const key = `${currentNetwork}:${chan}`;
            document.getElementById('channel-title').innerText = `${chan} [${currentNetwork}] - mIRC`;
            renderChat();
            renderUsers();
            renderSwitchbar();
        }

        function renderChat() {
            const key = `${currentNetwork}:${activeChannel}`;
            const out = document.getElementById('chat-output');
            out.innerHTML = channelData[key].messages.join('');
            out.scrollTop = out.scrollHeight;
        }

        function renderUsers() {
            const key = `${currentNetwork}:${activeChannel}`;
            const list = document.getElementById('user-list');
            list.innerHTML = "";
            const users = channelData[key].users;
            const displayLimit = 150; 
            
            users.slice(0, displayLimit).forEach(u => {
                const div = document.createElement('div');
                div.className = 'px-2 py-px truncate ' + (u.rank === "@" ? "ops" : (u.rank === "+" ? "text-blue-600" : ""));
                div.innerText = u.rank + u.nick;
                list.appendChild(div);
            });
            if (users.length > displayLimit) {
                const div = document.createElement('div');
                div.className = 'px-2 py-px text-gray-500 italic';
                div.innerText = `... and ${users.length - displayLimit} more`;
                list.appendChild(div);
            }
            document.getElementById('user-count').innerText = `${users.length} Users`;
        }

        function renderSwitchbar() {
            const bar = document.getElementById('switchbar');
            bar.innerHTML = "";
            networks[currentNetwork].forEach(chan => {
                const btn = document.createElement('button');
                btn.className = `btn-retro switchbar-btn ${activeChannel === chan ? 'btn-active font-bold' : ''}`;
                btn.innerText = chan;
                btn.onclick = () => switchChannel(chan);
                bar.appendChild(btn);
            });
        }

        function addMessage(net, chan, nick, text, colorClass = "") {
            const time = new Date().toLocaleTimeString('en-GB', {hour: '2-digit', minute:'2-digit'});
            let html = `<div class="mb-1"><span class="timestamp">[${time}]</span> `;
            if (nick === "System") {
                html += `<span class="system">${text}</span>`;
            } else {
                html += `<span class="network-tag">${net}</span><span class="nick ${colorClass}">&lt;${nick}&gt;</span> ${text}`;
            }
            html += `</div>`;
            
            const key = `${net}:${chan}`;
            if(!channelData[key]) return;
            channelData[key].messages.push(html);
            if(channelData[key].messages.length > 100) channelData[key].messages.shift();
            if(net === currentNetwork && chan === activeChannel) renderChat();
        }

        function handleCommand(input) {
            const parts = input.split(' ');
            if (parts[2] === "get" || parts[2] === "download") {
                startDownload(parts[3] || "SceneRelease.rar");
            }
        }

        function startDownload(name) {
            if (activeDownloads.length >= 10) return;
            activeDownloads.push({
                id: Math.random(), name: name.replace('#','') + ".iso",
                size: 700 * 1024, progress: 0, speed: 200
            });
            addMessage(currentNetwork, activeChannel, "System", `*** DCC Send of ${name} started.`);
            document.getElementById('dl-panel').style.display = 'block';
            updateNetDisplay();
        }

        function updateDlUI() {
            const list = document.getElementById('dl-list');
            list.innerHTML = "";
            activeDownloads.forEach(dl => {
                const perc = ((dl.progress / dl.size) * 100).toFixed(1);
                list.innerHTML += `<div class="dl-row"><div>${dl.name}</div><div class="progress-container"><div class="progress-fill" style="width:${perc}%"></div></div><div>${perc}%</div><div class="text-right">200 KB/s</div></div>`;
            });
        }

        function updateNetDisplay() {
            document.getElementById('slot-count').innerText = `${activeDownloads.length}/10`;
        }

        function toggleDownloads() {
            const panel = document.getElementById('dl-panel');
            panel.style.display = panel.style.display === 'block' ? 'none' : 'block';
        }

        function openCatalog() {
            const notepad = document.getElementById('notepad');
            notepad.classList.remove('hidden');
            let data = "1997-2010 SCENE MASTER LIST - 20,000 PACKETS\n" + "=".repeat(50) + "\n";
            for(let i=1; i<=300; i++) {
                const movie = movies[i % movies.length];
                const year = 2000 + (i % 11);
                const grp = sceneGroups[i % sceneGroups.length];
                data += `[PACK #${i}] ${movie.replace(/ /g,'.')}.${year}.DVDRip.XviD-${grp}.rar\n`;
            }
            document.getElementById('notepad-content').value = data;
        }

        function startSimulation() {
            if(simulationRunning) return;
            simulationRunning = true;
            document.getElementById('status-text').innerText = "Connected";
            document.getElementById('btn-connect').disabled = true;
            document.getElementById('net-id-display').innerText = currentNetwork;
            
            switchChannel(networks[currentNetwork][0]);

            // Burst logic for #warez and #movies
            setInterval(() => {
                const indicator = document.getElementById('burst-indicator');
                indicator.classList.remove('hidden');
                let count = 0;
                const burst = setInterval(() => {
                    const targetChan = activeChannel.includes("warez") || activeChannel.includes("movies") ? activeChannel : "#warez";
                    const movie = movies[Math.floor(Math.random()*movies.length)];
                    const grp = sceneGroups[Math.floor(Math.random()*sceneGroups.length)];
                    const packetNum = Math.floor(Math.random()*20000);
                    const fileName = `#${movie}_${grp}_${packetNum}`;
                    
                    addMessage(currentNetwork, targetChan, "PacketServ", `[SERVE] ${fileName} - Size: 700MB - /msg PacketServ get ${fileName}`, "dl-text");
                    
                    count++;
                    if(count >= 5) {
                        clearInterval(burst);
                        setTimeout(() => indicator.classList.add('hidden'), 800);
                    }
                }, 300);
            }, 5000);

            // Ticker
            setInterval(() => {
                activeDownloads.forEach((dl, i) => {
                    dl.progress += dl.speed;
                    if(dl.progress >= dl.size) {
                        addMessage(currentNetwork, activeChannel, "System", `*** DCC Get of ${dl.name} finished.`);
                        activeDownloads.splice(i, 1);
                        updateNetDisplay();
                    }
                });
                updateDlUI();
            }, 1000);
        }

        window.onload = () => {
            initData();
            setInterval(() => document.getElementById('clock').innerText = new Date().toLocaleTimeString(), 1000);
        };

        document.getElementById('chat-input').addEventListener('keypress', function(e) {
            if(e.key === 'Enter' && this.value.trim() !== "") {
                const val = this.value.trim();
                val.startsWith('/') ? handleCommand(val) : addMessage(currentNetwork, activeChannel, "Me", val);
                this.value = "";
            }
        });
    </script>
</body>
</html>
